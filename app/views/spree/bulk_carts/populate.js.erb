var $variant = $('[data-variant="<%= @variant.id %>"].bulk-add-to-cart'),
    $submit = $variant.find('button[type="submit"]');

<% if @error.present? %>
  $submit.addClass('btn-danger');

  setTimeout(function() {
    $submit.text('<%= Spree.t(:out_of_stock) %>');
  }, 1);

  setTimeout(function() {
    $submit.removeClass('btn-danger');
    $submit.text('<%= Spree.t(:add_to_cart) %>');
  }, 1000);
<% else %>
  $submit.addClass('btn-success');

  setTimeout(function() {
    $submit.text('<%= Spree.t(:added_to_cart) %>');
  }, 1);

  setTimeout(function() {
    $submit.removeClass('btn-success');
    $submit.text('<%= Spree.t(:add_to_cart) %>');
  }, 1000);

  Spree.fetch_cart();
<% end %>

$variant.find('input.quantity').val(1);
